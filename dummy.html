
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>CNIT133 Homework 3 Part II</title>
    <meta name="description" content="This is homework 3 Part 2 to compute seller's Commissions for 4 items">
    <meta name="viewport" content="width=device-width, initial-scale=1">  
    <!-- external stylesheets -->
    <link rel="stylesheet" type="text/css" href="hw3style.css">
</head>
<body>
    <header class="header-background">
        <div class="header-container">
            <a href="hw3.html" target="_self" class="header-text">CNIT 133 Homework 3 - Functions</a>
            <figure>
                <a href="https://www.ccsf.edu/" target="_self">
                    <img src="ccsf_ram.gif" alt="ccsf ram logo" width="139" class="right-image">
                </a>
            </figure>
        </div>
    </header>

    <div class="submenu-container">
        <nav>
            <a href="hw3-description.html" target="_self" class="button-two">Description</a>
            <a href="hw3-part1.html" target="_self" class="button-two">Part I</a>
            <a href="hw3-part2.html" target="_self" class="button-two">Part II</a>
            <a href="hw3-extra-credit.html" target="_self" class="button-two">Extra Credit</a>
        </nav>
    </div>

    <div class="hwk2box-box">
        <div>
            <header class="title">Sales Commissions</header>
            <div class="hwk2box">
                <form id="inputForm">
                    <div class="nameBlock">
                        <label for="sellerName">Seller's Name:</label>
                        <input name="sellerName" type="text" id="sellerName" title="Name for accounting purposes" class="nameField" value="" required>
                    </div>
                    
                    <h4>&nbsp;&nbsp;For each item type the quantity sold by the seller&nbsp;&nbsp;</h4>
                    
                    <div class="itemBlock">
                        <label for="item1">Item 1:</label>
                        <input type="number" class="left" id="item1" title="All item will default to 0 for non Number or negative value" name="item1" data-item="1" min="0">
                        <br>
                        <label for="item2">Item 2:</label>
                        <input type="number" class="left" id="item2" title="All item will default to 0 for non Number or negative value" name="item2" data-item="2" min="0">
                        <br>
                        <label for="item3">Item 3:</label>
                        <input type="number" class="left" id="item3" title="All item will default to 0 for non Number or negative value" name="item3" data-item="3" min="0">
                        <br>
                        <label for="item4">Item 4:</label>
                        <input type="number" class="left" id="item4" title="All item will default to 0 for non Number or negative value" name="item4" data-item="4" min="0"><br>
                    
                        <div class="submit-reset">
                            <div class="button-container">
                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                <input type="submit" class="buttonSubmit" value="SUBMIT">
                                <input type="reset" id="clearForm" class="buttonSubmit" value="CLEAR FORM">
                            </div>
                        </div>
                    </div>
                </form>
                <div class="output-box">
                    <table id="outputTable" class="outputTable">
                        <tr>
                            <td class="blackBold">Item #</td>
                            <td class="blackBold">Price</td>
                            <td class="blackBold2">Qty Sold</td>
                            <td class="blackBold3">Total</td>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>$20.99</td>
                            <td><input type="text" id="numSold1" class="numField" readonly></td>
                            <td><input type="text" id="total1" class="right-table" readonly></td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>$12.75</td>
                            <td><input type="text" id="numSold2" class="numField" readonly></td>
                            <td><input type="text" id="total2" class="right-table" readonly></td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>$9.95</td>
                            <td><input type="text" id="numSold3" class="numField" readonly></td>
                            <td><input type="text" id="total3" class="right-table" readonly></td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td>$35.89</td>
                            <td><input type="text" id="numSold4" class="numField" readonly></td>
                            <td><input type="text" id="total4" class="right-table" readonly></td>
                        </tr>
                    </table>
                    <table>
                        <tr>
                            <td class="left-table">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Total Amount Sold:</td>
                            <td><input type="text" id="totalSold" class="right-table" readonly></td>
                        </tr>
                        <tr>
                            <td class="left-table">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Total Weekly Earnings:</td>
                            <td><input type="text" id="totalEarn" class="right-table" readonly></td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <article class="solution-box">
        <header>
            <h2>Dummy solution</h2>
        </header>
        <div class="solution-frame">
            <iframe src="dummy.pdf"></iframe>
        </div>
        <br><br>
    </article>

    <footer>
        <br>
        <figure>
            <div class="footer-text-container">
                <img src="op.jpg" alt="self" width="80" class="rounded-image">
                <p>Teresita Anselm<br>
                    City College of San Francisco<br>
                    tanselm@mail.ccsf.edu<br></p>
            </div>
        </figure>
        <p class="right-text">Copyright of Teresita Anselm &copy; 2023</p>
    </footer>

    <!-- jQuery and JavaScript libraries for validation -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
    <script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/jquery.validate.min.js"></script>
    <script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/additional-methods.min.js"></script>
    
    <script>
        // jQuery validation code
        jQuery.validator.setDefaults({
            debug: false, 
            success: "valid",
            errorClass: "error-text"
        });

       // Create an array of item field names
       var itemFields = ["item1", "item2", "item3", "item4"];
        var itemValidationMessages = {}

        // Create an object to store validation rules for all item fields
       // Create an object to store validation rules for all item fields
var itemValidationRules = {};

// Validation rules and messages for each item field
for (var i = 1; i <= 4; i++) {
    var itemFieldName = "item" + i;
    itemValidationRules[itemFieldName] = {
        required: true,
        number: true,
        min: 0
    };
    itemValidationMessages[itemFieldName] = {
        required: "&nbsp;Please enter a quantity for Item " + i + "!",
        //number: "Numbers only for Item " + i + "!",
        //min: "Positive number only for Item " + i + "!"
    };
}

// Add validation rule and message for sellerName
itemValidationRules["sellerName"] = {
    required: true // Name required
};
itemValidationMessages["sellerName"] = {
    required: "&nbsp;&nbsp;Please enter the seller's name!" // Customize message for name
};

$("#inputForm").validate({
    rules: itemValidationRules,
    messages: itemValidationMessages,
    submitHandler: function (form) {
        updateItemTotals();
        sumCommission();
        return false; // Prevent form submission
    }
});


        $("#inputForm").validate({
            rules: itemValidationRules,
            messages: itemValidationMessages,
            submitHandler: function (form) {
                updateItemTotals();
                sumCommission();
                return false; // Prevent form submission
            }
        });

        // Event listener for the "CLEAR FORM" button
        $('#clearForm').click(function () {
            // Reset the form
            $('#inputForm')[0].reset();
            // Clear the calculated fields
            $('.numField, .right-table').val('');
        });


        // Listen for changes in item1-4 fields
        $(document).ready(function () {
            $( document ).tooltip();
            for (var i = 1; i <= 4; i++) {
                $('#item' + i).on('input', function () {
                    var itemId = $(this).data('item'); // Get the item number from data-item attribute
                    var quantity = parseFloat($(this).val()); // Parse the input value as a float
                    if (!isNaN(quantity) && quantity > 0) {
                        // If the input is a valid positive number, update numSold1-4 with the valid quantity
                        $('#numSold' + itemId).val(quantity);
                    } else {
                        // If the input is not valid (negative or non-numeric), reset it to 0
                        $(this).val('0');
                        $('#numSold' + itemId).val('0');
                    }
                    updateItemTotals(); // Recalculate item totals
                });
            }
        });

        // Function to update item totals
        function updateItemTotals() {
            let prices = [20.99, 12.75, 9.95, 35.89];
            for (var i = 1; i <= 4; i++) {
                var itemId = i; // No need to get the data-item attribute again
                var quantity = parseFloat($('#item' + i).val());
                if (!isNaN(quantity) && quantity >= 0) {
                    var total = (quantity * prices[i - 1]).toFixed(2);
                    $('#total' + i).val('$' + total);
                } else {
                    $('#total' + i).val('');
                }
            }
        }

        // Calculate and update the commission
        function sumCommission() {
            var totalSales = 0;

            // Loop through total1 to total4 and calculate the total sales
            for (var i = 1; i <= 4; i++) {
                var total = parseFloat($('#total' + i).val().replace('$', '')) || 0;
                totalSales += total;
            }

            // Calculate the commission (9% of totalSales + 250)
            var commission = (0.09 * totalSales) + 250;

            // Update the totalSold and commission for seller
            $('#totalSold').val('$ ' + totalSales.toFixed(2)); // Add the "$" symbol before the totalSales value
            $('#totalEarn').val('$ ' + commission.toFixed(2)); // Display with 2 decimal places
        }
    
    </script>
</body>
</html>
